<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  <DamageDef>
    <defName>SFE_HauntingFlame</defName>
    <workerClass>NoCamShakeExplosions.DamageWorker_FlameNoCamShake</workerClass>
    <label>flame</label>
    <hasForcefulImpact>false</hasForcefulImpact>
    <makesBlood>false</makesBlood>
    <canInterruptJobs>false</canInterruptJobs>
    <externalViolence>true</externalViolence>
    <deathMessage>{0} has burned to death.</deathMessage>
    <hediff>Burn</hediff>
    <armorCategory>Heat</armorCategory>
    <minDamageToFragment>15</minDamageToFragment>
    <defaultDamage>14</defaultDamage>
    <defaultArmorPenetration>0</defaultArmorPenetration>
    <explosionHeatEnergyPerCell>15</explosionHeatEnergyPerCell>
    <explosionCellFleck>BlastFlame</explosionCellFleck>
    <explosionColorCenter>(1, 0.7, 0.7)</explosionColorCenter>
    <explosionColorEdge>(1, 1, 0.7)</explosionColorEdge>
    <soundExplosion>Explosion_Flame</soundExplosion>
    <combatLogRules>Damage_Flame</combatLogRules>
    <canUseDeflectMetalEffect>false</canUseDeflectMetalEffect>
  </DamageDef>
  
  <ThingDef ParentName="BaseBullet">
    <defName>SFE_Bullet_Flamelance</defName>
    <label>flamelance fuel</label>
    <graphicData>
      <texPath>Projectile/FireLance</texPath>
      <graphicClass>Graphic_Flicker</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
    </graphicData>
    <thingClass>ExplosiveTrailsEffect.Projectile_FlameThrower</thingClass>
    <projectile>
      <speed>64</speed>
      <arcHeightFactor>1.2</arcHeightFactor>
      <shadowSize>1</shadowSize>
      <damageDef>SFE_HauntingFlame</damageDef>
      <explosionRadius>0.9</explosionRadius>
      <preExplosionSpawnThingDef>Filth_Fuel</preExplosionSpawnThingDef>
      <preExplosionSpawnChance>0.5</preExplosionSpawnChance>
      <ai_IsIncendiary>true</ai_IsIncendiary>
      <explosionChanceToStartFire>0.8</explosionChanceToStartFire>
    </projectile>
  </ThingDef>
  
  <ThingDef ParentName="DankPyon_Base_Sharp_NormalSize">
    <defName>SFE_VersatileWeapon_FireLance</defName>
    <label>fire lance</label>
    <description>The Fire Lance combines the deadly efficiency of a spear, with the potential of gunpowder. A deadly weapon up close, and just as deadly nearby with its streams of fire.</description>
    <possessionCount>1</possessionCount>
    <graphicData>
      <texPath>WeaponMelee/Spears/Fire_Lance</texPath>
      <maskPath>WeaponMelee/Spears/Fire_Lance_m</maskPath>
      <shaderType>CutoutComplex</shaderType>
      <graphicClass>Graphic_Single</graphicClass>
      <color>(94, 96, 103)</color>
    </graphicData>
    <uiIconScale>1.2</uiIconScale>
    <techLevel>Medieval</techLevel>
    <costStuffCount>50</costStuffCount>
    <weaponTags>
      <li>MedievalMeleeDecent</li>
    </weaponTags>
    <statBases>
      <MaxHitPoints>100</MaxHitPoints>
      <WorkToMake>205</WorkToMake>
      <Mass>2.5</Mass>
      <Beauty>-3</Beauty>
      <Flammability>0.5</Flammability>
      <DeteriorationRate>2</DeteriorationRate>
      <SellPriceFactor>0.2</SellPriceFactor>
    </statBases>
    <stuffCategories>
      <li>Metallic</li>
    </stuffCategories>
    <tools>
      <li>
        <label>shaft</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <armorPenetration>0.2</armorPenetration>
        <power>13</power>
        <cooldownTime>2</cooldownTime>
      </li>
      <li>
        <label>shaft</label>
        <capacities>
          <li>Poke</li>
        </capacities>
        <armorPenetration>0.2</armorPenetration>
        <power>13</power>
        <cooldownTime>2</cooldownTime>
      </li>
      <li>
        <label>point</label>
        <capacities>
          <li>Stab</li>
        </capacities>
        <armorPenetration>0.25</armorPenetration>
        <power>25</power>
        <cooldownTime>2.1</cooldownTime>
      </li>
    </tools>
    <verbs>
      <li>
        <verbClass>Verb_Shoot</verbClass>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>SFE_Bullet_Flamelance</defaultProjectile>
        <warmupTime>1.5</warmupTime>
        <range>7</range>
        <forcedMissRadius>1</forcedMissRadius>
        <burstShotCount>7</burstShotCount>
        <ticksBetweenBurstShots>3</ticksBetweenBurstShots>
        <soundCast>SFE_Shot_Flamelance</soundCast>
        <soundCastTail>GunTail_Medium</soundCastTail>
        <muzzleFlashScale>14</muzzleFlashScale>
        <targetParams>
          <canTargetLocations>true</canTargetLocations>
        </targetParams>
      </li>
    </verbs>
    <comps>
      <li Class="CompProperties_Reloadable">
        <maxCharges>7</maxCharges>
        <ammoDef>DankPyon_Gunpowder</ammoDef>
        <ammoCountToRefill>20</ammoCountToRefill>
        <baseReloadTicks>40</baseReloadTicks>
        <soundReload>Standard_Reload</soundReload>
        <hotKey>Misc4</hotKey>
        <chargeNoun>charge</chargeNoun>
      </li>
    </comps>
    <modExtensions>
      <li Class="VFECore.ThingDefExtension">
        <usableWithShields>true</usableWithShields>
      </li>
    </modExtensions>
  </ThingDef>
</Defs>